{"version":3,"sources":["reducers/history.js","shared/prop-types.js","lib/helpers.js","shared/Gauge.js","history/HistoryDayGoal.js","history/HistoryDay.js","history/HistoryScreen.js","reducers/currentUser.js","auth/TogglablePasswordField.js","auth/LoginScreen.js","main/GoalTrackerWidget.js","reducers/todaysProgress.js","main/TrackerScreen.js","main/HomeScreen.js","shared/PrivateRoute.js","reducers/goals.js","settings/AddSettingDialog.js","settings/DeleteSettingDialog.js","settings/GoalSetting.js","settings/SettingsScreen.js","reducers/closeDay.js","reducers/index.js","reducers/today.js","store.js","App.js","reportWebVitals.js","serviceWorkerRegistration.js","icons/clock-reset.png","lib/clock.js","index.js"],"names":["CLEAR_HISTORY","positiveInteger","and","integer","between","gt","shape","id","string","isRequired","name","target","units","oneOf","keysOf","objectOf","nonNegativeInteger","requiredHistoryDayProgressesPropType","props","propName","componentName","prefix","value","Array","isArray","Error","length","every","Number","isInteger","progress","HistoryDayProgressesPropType","date","progresses","FORMATTERS","full","Intl","DateTimeFormat","weekday","day","month","year","medium","SPECIAL_FORMATS","formatDate","format","refDate","Date","diff","differenceInCalendarDays","isoDate","formatISO","representation","Gauge","max","LinearProgress","style","height","variant","normalize","defaultProps","HistoryDayGoal","goal","stats","details","ListItem","ListItemText","component","primary","secondary","secondaryTypographyProps","HistoryDay","goals","Divider","List","Typography","map","goalStats","selectState","history","HistoryScreen","useEffect","document","title","useSelector","dispatch","useDispatch","Button","Link","to","Card","className","CardHeader","CardContent","dayStats","CardActions","onClick","type","LOGIN_FAILURE","LOGIN_START","LOGIN_SUCCESS","LOGOUT","TogglablePasswordField","useState","visible","setVisible","label","icon","endAdornment","InputAdornment","position","IconButton","arial-label","TextField","InputProps","selectLoginState","currentUser","loginState","LoginScreen","email","setEmail","password","setPassword","loggingIn","logInIcon","canLogIn","snackBar","Snackbar","message","open","onSubmit","event","preventDefault","meta","offline","effect","json","method","url","commit","payload","rollback","logIn","subheader","autoComplete","fullWidth","margin","onChange","e","toLowerCase","placeholder","required","display","justifyContent","color","disabled","GoalTrackerWidget","onProgress","adderComponent","Fab","size","data-testid","PROGRESS","today","todaysProgress","TrackerScreen","totalProgress","totalTarget","getDayCounts","overallProgress","markGoalProgression","goalId","increment","progressOnGoal","selectLoggedIn","HomeScreen","PrivateComponent","loggedIn","useHistory","from","useLocation","React","createElement","shouldPush","action","push","pathname","state","PrivateRoute","rest","render","ObjectId","require","ADD_GOAL","REMOVE_GOAL","UPDATE_GOAL","DEFAULT_STATE","undefined","keepOpen","AddSettingDialog","onAdd","onCancel","setState","prevGoalId","setPrevGoalId","isEditing","Dialog","aria-labelledby","onClose","DialogTitle","DialogContent","handleChange","FormGroup","FormControlLabel","control","Checkbox","checked","DialogActions","triggerAdd","field","caster","String","DeleteSettingDialog","onDelete","DialogContentText","styles","moreIcons","grey","withStyles","classes","onDeleteClick","onEditClick","anchorEl","setAnchor","replace","ListItemSecondaryAction","aria-owns","aria-haspopup","currentTarget","root","Menu","Boolean","closeMenu","MenuItem","ListItemIcon","dialog","SettingsScreen","openGoalDeleter","openGoalEditor","updateGoal","addGoal","closeDialogs","CLOSE_DAY","tallyPreviousDay","historyEntry","Object","keys","coreReducer","combineReducers","generate","filter","previous","goalTrackerReducer","reduceReducers","subDays","reduxOfflineConfig","offlineConfig","persistOptions","storage","localForage","devToolsEnhancer","window","__REDUX_DEVTOOLS_EXTENSION__","x","store","initialState","shouldPersist","enhancer","compose","createStore","makeStore","App","exact","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","isLocalhost","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","STAMP_FORMATTER","hour","minute","second","permissionGranted","setInterval","process","closePreviousDay","Notification","permission","requestPermission","status","checkForPermissions","storesLastDay","getState","parseISO","checkForTodaysFirstUse","text","secondsVisible","notif","body","lang","requireInteraction","tag","vibrate","close","addEventListener","setTimeout","notify","clockIcon","ReactDOM","StrictMode","getElementById","URL","href","origin","fetch","headers","response","contentType","get","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.95b3b4a9.chunk.js","sourcesContent":["// Types d’actions\n// ---------------\n\nconst CLEAR_HISTORY = 'goal-tracker/history/HISTORY_CLEAR'\n\n// Réducteur\n// ---------\n\nexport default function reduceHistory(state = [], action) {\n  switch (action.type) {\n    case CLEAR_HISTORY:\n      return []\n\n    default:\n      return state\n  }\n}\n\n// Action Creators\n// ---------------\n\nexport function clearHistory() {\n  return { type: CLEAR_HISTORY }\n}\n","import {\n  and,\n  between,\n  integer,\n  keysOf,\n  nonNegativeInteger,\n} from 'airbnb-prop-types'\nimport {\n  arrayOf,\n  bool,\n  elementType,\n  func,\n  node,\n  objectOf,\n  oneOf,\n  oneOfType,\n  shape,\n  string,\n} from 'prop-types'\n\nexport {\n  arrayOf,\n  bool,\n  elementType,\n  func,\n  node,\n  nonNegativeInteger,\n  oneOfType,\n  shape,\n  string,\n}\n\nexport const positiveInteger = and([integer(), between({ gt: 0 })])\n\nexport const GoalPropType = shape({\n  id: string.isRequired,\n  name: string.isRequired,\n  target: positiveInteger.isRequired,\n  units: string.isRequired,\n})\n\nexport const LoginStatePropType = oneOf([\n  'logged-out',\n  'pending',\n  'logged-in',\n  'failure',\n])\n\nexport const TodaysProgressPropType = and([\n  keysOf(string),\n  objectOf(nonNegativeInteger),\n])\n\nfunction requiredHistoryDayProgressesPropType(props, propName, componentName) {\n  const prefix = `${propName} in ${componentName} must`\n  const value = props[propName]\n\n  if (!Array.isArray(value)) {\n    return new Error(`${prefix} be an array.`)\n  }\n\n  if (value.length !== 2 || !value.every(Number.isInteger)) {\n    return new Error(`${prefix} be a pair of integers.`)\n  }\n\n  const [progress, target] = value\n  if (progress < 0) {\n    return new Error(`${prefix} start with a non-negative progress value.`)\n  }\n\n  if (target <= 0) {\n    return new Error(`${prefix} end with a positive target value.`)\n  }\n\n  return null\n}\n\nexport function HistoryDayProgressesPropType(props, propName, componentName) {\n  const value = props[propName]\n\n  if (value == null) {\n    return null\n  }\n\n  return requiredHistoryDayProgressesPropType(props, propName, componentName)\n}\n\nHistoryDayProgressesPropType.isRequired = requiredHistoryDayProgressesPropType\n\nexport const HistoryDayStatsPropType = shape({\n  date: string.isRequired,\n  progresses: and([keysOf(string), objectOf(HistoryDayProgressesPropType)])\n    .isRequired,\n})\n","import { differenceInCalendarDays, formatISO } from 'date-fns'\n\n// Utilitaires\n// ===========\n\nconst FORMATTERS = {\n  full: new Intl.DateTimeFormat('fr-FR', {\n    weekday: 'long',\n    day: 'numeric',\n    month: 'long',\n    year: 'numeric',\n  }),\n  medium: new Intl.DateTimeFormat('fr-FR', {\n    day: 'numeric',\n    month: 'long',\n    year: 'numeric',\n  }),\n}\n\nconst SPECIAL_FORMATS = ['Aujourd’hui', 'Hier', 'Avant-hier']\n\n// Formatage de date de façon “pratique”.\n//\n// Si un format est passé (`String`), il est utilisé directement (c’est le cas\n// pour le titre de `TrackerScreen` par exemple, qui utilise le code de format\n// local semi-long `'medium'`), sinon on utilise des textes spéciaux pour\n// aujourd’hui, hier et avant-hier, et des formats longs pour toute date autre.\nexport function formatDate(date, format, { refDate = new Date() } = {}) {\n  if (typeof date === 'string') {\n    date = new Date(date)\n  }\n  if (typeof refDate === 'string') {\n    refDate = new Date(refDate)\n  }\n  if (format) {\n    return FORMATTERS[format].format(date)\n  }\n  const diff = differenceInCalendarDays(refDate, date)\n  return SPECIAL_FORMATS[diff] || FORMATTERS.full.format(date)\n}\n\n// Calcule les totaux de progression et d’objectifs sur la journée, pour\n// déterminer ensuite par exemple le taux global de progression, ou le retard\n// potentiel (avec des données résultats permettant de l’affiche de façon\n// explicite).\nexport function getDayCounts(todaysProgress, goals) {\n  let [totalProgress, totalTarget] = [0, 0]\n\n  for (const { id, target } of goals) {\n    totalProgress += todaysProgress[id] || 0\n    totalTarget += target\n  }\n\n  return { totalProgress, totalTarget }\n}\n\nexport function isoDate(date) {\n  return formatISO(date, { representation: 'date' })\n}\n","import LinearProgress from '@material-ui/core/LinearProgress'\n\nimport { nonNegativeInteger, positiveInteger } from '../shared/prop-types'\n\nconst Gauge = ({ max, value }) => {\n  return (\n    <LinearProgress\n      style={{ height: 8 }}\n      variant='determinate'\n      value={normalize(value, max)}\n    />\n  )\n}\n\nGauge.defaultProps = {\n  max: 100,\n}\n\n// Comme toujours, on définit les propriétés attendues/autorisées pour\n// validation.\nGauge.propTypes = {\n  max: positiveInteger,\n  value: nonNegativeInteger.isRequired,\n}\n\nfunction normalize(value, max) {\n  return value * (100 / max)\n}\n\nexport default Gauge\n","// Journée historique d’un objectif\n// ================================\n\n// Sous-section de l'écran d’historique, dédiée à un objectif sur un jour\n// précis.  Rendu en fait à l'intérieur d'un autre composant bête: `HistoryDay`.\n\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemText from '@material-ui/core/ListItemText'\n\nimport Gauge from '../shared/Gauge'\nimport {\n  GoalPropType,\n  HistoryDayProgressesPropType,\n} from '../shared/prop-types'\n\n// La déstructuration et les valeurs par défaut en force !\nconst HistoryDayGoal = ({\n  goal: { name, units },\n  stats: [progress = 0, target] = [],\n}) => {\n  const details = (\n    <div>\n      <Gauge value={progress} max={target} />\n      {progress} {units} sur {target}\n    </div>\n  )\n\n  return (\n    <ListItem>\n      <ListItemText\n        component='div'\n        primary={name}\n        secondary={details}\n        secondaryTypographyProps={{ component: 'div' }}\n      />\n    </ListItem>\n  )\n}\n\n// Comme toujours, on définit les propriétés attendues/autorisées pour\n// validation.\nHistoryDayGoal.propTypes = {\n  goal: GoalPropType.isRequired,\n  stats: HistoryDayProgressesPropType.isRequired,\n}\n\nexport default HistoryDayGoal\n","// Journée d’historique\n// ====================\n\n// Section de l'écran d’historique, dédiée à un jour précis.\n\nimport Divider from '@material-ui/core/Divider'\nimport List from '@material-ui/core/List'\nimport Typography from '@material-ui/core/Typography'\n\nimport {\n  arrayOf,\n  GoalPropType,\n  HistoryDayStatsPropType,\n} from '../shared/prop-types'\nimport { formatDate } from '../lib/helpers'\nimport HistoryDayGoal from './HistoryDayGoal'\n\nconst HistoryDay = ({ goals, stats: { date, progresses } }) => (\n  <div>\n    <Divider />\n    <List>\n      <Typography variant='subtitle1'>{formatDate(date)}</Typography>\n      {goals.map((goal) => {\n        const goalStats = progresses[goal.id]\n        if (goalStats) {\n          return <HistoryDayGoal key={goal.id} goal={goal} stats={goalStats} />\n        }\n        return null\n      })}\n    </List>\n  </div>\n)\n\n// Comme toujours, on définit les propriétés attendues/autorisées pour\n// validation.\nHistoryDay.propTypes = {\n  goals: arrayOf(GoalPropType).isRequired,\n  stats: HistoryDayStatsPropType.isRequired,\n}\n\nexport default HistoryDay\n","import { Link } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useEffect } from 'react'\n\nimport ArrowBack from '@material-ui/icons/ArrowBack'\nimport Button from '@material-ui/core/Button'\nimport Card from '@material-ui/core/Card'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport ClearIcon from '@material-ui/icons/Clear'\nimport Typography from '@material-ui/core/Typography'\n\nimport { clearHistory } from '../reducers/history'\nimport HistoryDay from './HistoryDay'\n\nexport const HistoryScreen = () => {\n  useEffect(() => {\n    document.title = 'Mon historique'\n  }, [])\n\n  const { goals, history } = useSelector(selectState)\n  const dispatch = useDispatch()\n\n  return (\n    <>\n      <Button component={Link} to='/' variant='text'>\n        <ArrowBack />\n        Retour\n      </Button>\n      <Card className='history'>\n        <CardHeader title='Historique' />\n        <CardContent>\n          {history.map((dayStats) => (\n            <HistoryDay goals={goals} key={dayStats.date} stats={dayStats} />\n          ))}\n          {history.length === 0 && (\n            <Typography>Aucun historique disponible</Typography>\n          )}\n        </CardContent>\n        {history.length > 0 && (\n          <CardActions>\n            <Button\n              variant='contained'\n              onClick={() => dispatch(clearHistory())}\n            >\n              <ClearIcon />\n              Réinitialiser\n            </Button>\n          </CardActions>\n        )}\n      </Card>\n    </>\n  )\n}\n\nconst selectState = ({ goals, history }) => ({ goals, history })\n\nexport default HistoryScreen\n","// Types d’actions\n// ---------------\n\nconst LOGIN_FAILURE = 'goal-tracker/currentUser/AUTH_LOGIN_FAILURE'\nconst LOGIN_START = 'goal-tracker/currentUser/AUTH_LOGIN_START'\nconst LOGIN_SUCCESS = 'goal-tracker/currentUser/AUTH_LOGIN_SUCCESS'\nconst LOGOUT = 'goal-tracker/currentUser/AUTH_LOGOUT'\n\n// Réducteur\n// ---------\n\nexport default function reduceCurrentUser(\n  state = { loginState: 'logged-out' },\n  action\n) {\n  switch (action.type) {\n    case LOGIN_START:\n      return { loginState: 'pending' }\n\n    case LOGIN_FAILURE:\n      return { loginState: 'failure' }\n\n    case LOGIN_SUCCESS: {\n      const { email } = action.payload\n      return { loginState: 'logged-in', email }\n    }\n\n    case LOGOUT:\n      return { loginState: 'logged-out' }\n\n    default:\n      return state\n  }\n}\n\n// Action Creators\n// ---------------\n\nexport function logIn(email, password) {\n  return {\n    type: LOGIN_START,\n    meta: {\n      offline: {\n        effect: {\n          json: { email, password },\n          method: 'POST',\n          url: 'http://localhost:3001/api/v1/sessions',\n        },\n        commit: { type: LOGIN_SUCCESS, payload: { email } },\n        rollback: { type: LOGIN_FAILURE },\n      },\n    },\n  }\n}\n\nexport function logInFailure() {\n  return { type: LOGIN_FAILURE }\n}\n\nexport function logInStart() {\n  return { type: LOGIN_START }\n}\n\nexport function logInSuccess(email) {\n  return { type: LOGIN_SUCCESS, payload: { email } }\n}\n\nexport function logOut() {\n  return { type: LOGOUT }\n}\n","import { useState } from 'react'\n\nimport IconButton from '@material-ui/core/IconButton'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport TextField from '@material-ui/core/TextField'\nimport Visibility from '@material-ui/icons/Visibility'\nimport VisibilityOff from '@material-ui/icons/VisibilityOff'\n\nexport const TogglablePasswordField = (props) => {\n  const [visible, setVisible] = useState(false)\n\n  const type = visible ? 'text' : 'password'\n  const label = visible ? 'Masquer le mot de passe' : 'Voir le mot de passe'\n  const icon = visible ? <VisibilityOff /> : <Visibility />\n  const endAdornment = (\n    <InputAdornment position='end'>\n      <IconButton arial-label={label} onClick={toggleVisible} title={label}>\n        {icon}\n      </IconButton>\n    </InputAdornment>\n  )\n\n  return <TextField {...props} InputProps={{ endAdornment }} type={type} />\n\n  function toggleVisible() {\n    setVisible((visible) => !visible)\n  }\n}\n\nTogglablePasswordField.propTypes = TextField.propTypes\n\nexport default TogglablePasswordField\n","import { useDispatch, useSelector } from 'react-redux'\nimport { useEffect, useState } from 'react'\n\nimport ArrowForward from '@material-ui/icons/ArrowForward'\nimport Button from '@material-ui/core/Button'\nimport Card from '@material-ui/core/Card'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport TextField from '@material-ui/core/TextField'\n\nimport { logIn } from '../reducers/currentUser'\nimport TogglablePasswordField from './TogglablePasswordField'\n\nimport './LoginScreen.css'\n\nconst LoginScreen = () => {\n  useEffect(() => {\n    document.title = 'Identifiez-vous'\n  }, [])\n\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n\n  const loginState = useSelector(selectLoginState)\n  const dispatch = useDispatch()\n\n  const loggingIn = loginState === 'pending'\n  const logInIcon = loggingIn ? null : <ArrowForward />\n  const canLogIn = !loggingIn && email && password\n\n  const snackBar =\n    loginState === 'failure' ? (\n      <Snackbar message='Identifiant ou mot de passe invalide' open />\n    ) : (\n      ''\n    )\n\n  return (\n    <form onSubmit={login}>\n      <Card className='loginScreen'>\n        <CardHeader title='Goal Tracker' subheader='Connexion' />\n        <CardContent>\n          <TextField\n            autoComplete='home email'\n            id='email'\n            label='E-mail'\n            fullWidth\n            margin='normal'\n            onChange={(e) => setEmail(e.target.value.toLowerCase())}\n            placeholder='mon@email.tld'\n            required\n            type='email'\n            value={email}\n          />\n          <TogglablePasswordField\n            autoComplete='current-password'\n            id='password'\n            label='Mot de passe'\n            fullWidth\n            margin='normal'\n            onChange={(e) => setPassword(e.target.value)}\n            placeholder='super mot de passe'\n            required\n            value={password}\n          />\n        </CardContent>\n        <CardActions style={{ display: 'flex', justifyContent: 'center' }}>\n          <Button\n            color='primary'\n            disabled={!canLogIn}\n            type='submit'\n            variant='contained'\n          >\n            {logInIcon}\n            Connecte-toi\n          </Button>\n        </CardActions>\n      </Card>\n      {snackBar}\n    </form>\n  )\n\n  function login(event) {\n    event.preventDefault()\n    dispatch(logIn(email, password))\n  }\n}\n\nconst selectLoginState = ({ currentUser: { loginState } }) => loginState\n\nexport default LoginScreen\n","import Add from '@material-ui/icons/Add'\nimport Fab from '@material-ui/core/Fab'\nimport ThumbUp from '@material-ui/icons/ThumbUp'\nimport Typography from '@material-ui/core/Typography'\n\nimport { func, GoalPropType, nonNegativeInteger } from '../shared/prop-types'\nimport Gauge from '../shared/Gauge'\n\nconst GoalTrackerWidget = ({\n  goal,\n  goal: { name, units, target },\n  onProgress,\n  progress,\n}) => {\n  const adderComponent =\n    target > progress ? (\n      <Fab color='secondary' onClick={() => onProgress?.(goal)} size='small'>\n        <Add data-testid='in-progress' />\n      </Fab>\n    ) : (\n      <Fab disabled size='small'>\n        <ThumbUp data-testid='completed' />\n      </Fab>\n    )\n\n  return (\n    <div className='goal'>\n      <div className='summary'>\n        <Typography variant='h6' component='h2'>\n          {name}\n        </Typography>\n        <Gauge value={progress} max={target} />\n        <Typography component='small'>\n          {`${progress} ${units} sur ${target}`}\n        </Typography>\n      </div>\n      <div className='cta'>{adderComponent}</div>\n    </div>\n  )\n}\n\n// Comme toujours, on définit les propriétés attendues/autorisées pour\n// validation.\nGoalTrackerWidget.propTypes = {\n  goal: GoalPropType.isRequired,\n  progress: nonNegativeInteger.isRequired,\n  onProgress: func,\n}\n\nexport default GoalTrackerWidget\n","// Types d’actions\n// ---------------\n\nconst PROGRESS = 'goal-tracker/todaysProgress/PROGRESS'\n\n// Réducteur\n// ---------\n\nexport default function reduceTodaysProgress(state = {}, action) {\n  switch (action.type) {\n    case PROGRESS: {\n      const { goalId, increment } = action.payload\n      const previous = state[goalId] || 0\n      return { ...state, [goalId]: previous + increment }\n    }\n\n    default:\n      return state\n  }\n}\n\n// Action Creators\n// ---------------\n\nexport function progressOnGoal(goalId, increment = 1) {\n  increment = Number(increment) || 0\n  return { type: PROGRESS, payload: { goalId, increment } }\n}\n","import { Link } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useEffect } from 'react'\n\nimport Button from '@material-ui/core/Button'\nimport Card from '@material-ui/core/Card'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport HistoryIcon from '@material-ui/icons/History'\nimport SettingsIcon from '@material-ui/icons/Settings'\n\nimport { formatDate, getDayCounts } from '../lib/helpers'\nimport Gauge from '../shared/Gauge'\nimport GoalTrackerWidget from './GoalTrackerWidget'\nimport { progressOnGoal } from '../reducers/todaysProgress'\n\nimport './TrackerScreen.css'\n\nconst TrackerScreen = () => {\n  useEffect(() => {\n    document.title = 'Mes objectifs du jour'\n  }, [])\n\n  const { goals, today, todaysProgress } = useSelector(selectState)\n  const dispatch = useDispatch()\n\n  return (\n    <Card className='goalTracker'>\n      <CardHeader\n        subheader={<Gauge {...overallProgress()} />}\n        title={formatDate(today, 'medium')}\n      />\n      <CardContent>\n        {goals.map((goal) => (\n          <GoalTrackerWidget\n            goal={goal}\n            key={goal.id}\n            onProgress={markGoalProgression}\n            progress={todaysProgress[goal.id] || 0}\n          />\n        ))}\n      </CardContent>\n      <CardActions>\n        <Button\n          color='secondary'\n          component={Link}\n          to='/history'\n          variant='contained'\n        >\n          <HistoryIcon /> Historique\n        </Button>\n        <Button component={Link} to='/settings' variant='contained'>\n          <SettingsIcon /> Paramètres\n        </Button>\n      </CardActions>\n    </Card>\n  )\n\n  function markGoalProgression({ id }) {\n    dispatch(progressOnGoal(id))\n  }\n\n  function overallProgress() {\n    const { totalProgress, totalTarget } = getDayCounts(todaysProgress, goals)\n\n    return { value: totalProgress, max: totalTarget }\n  }\n}\n\nconst selectState = ({ goals, today, todaysProgress }) => ({\n  goals,\n  today,\n  todaysProgress,\n})\n\nexport default TrackerScreen\n","import { useSelector } from 'react-redux'\n\nimport LoginScreen from '../auth/LoginScreen'\nimport TrackerScreen from './TrackerScreen'\n\nconst HomeScreen = () => {\n  const loggedIn = useSelector(selectLoggedIn)\n\n  return loggedIn ? <TrackerScreen /> : <LoginScreen />\n}\n\nconst selectLoggedIn = ({ currentUser: { loginState } }) =>\n  loginState === 'logged-in'\n\nexport default HomeScreen\n","// Enrobeur de route authentifiée\n// ==============================\n//\n// Permet de définir des routes exigeant que l’utilisateur soit logué.  En\n// pratique, définit une route classique amenant sur un HOC connecté au *store*\n// Redux et vérifiant l’état de l’authentification.  Si l’utilisateur est\n// connecté, on *render* le composant normalement, sinon on utilise un\n// `<Redirect />` pour ramener à l’écran de connexion.\n\nimport React from 'react'\nimport { Redirect, Route, useHistory, useLocation } from 'react-router-dom'\nimport { useSelector } from 'react-redux'\n\nimport { elementType } from './prop-types'\n\nconst PrivateRoute = ({ component, ...rest }) => (\n  <Route\n    {...rest}\n    render={(props) => <PrivateComponent component={component} {...props} />}\n  />\n)\n\nPrivateRoute.propTypes = {\n  component: elementType.isRequired,\n}\n\nconst PrivateComponent = ({ component, ...props }) => {\n  const loggedIn = useSelector(selectLoggedIn)\n  const history = useHistory()\n  const from = useLocation()\n\n  if (loggedIn) {\n    return React.createElement(component, props)\n  }\n\n  // Si on résulte d’une nav interactive une fois l’appli rendue côté client,\n  // `history.action` vaut `PUSH` : une interdiction devrait donc faire l’objet\n  // d’un ajout d’URL dans l’historique (vers le login), et non un remplacement\n  // de l’URL précédente.  En revanche, lors d’un rendu initial sur navigation\n  // classique du browser, `history.action` sera autre (normalement `POP`), et\n  // de fait, on devrait éviter une étape d’historique intermédiaire.\n  const shouldPush = history.action === 'PUSH'\n\n  return <Redirect push={shouldPush} to={{ pathname: '/', state: { from } }} />\n}\nPrivateComponent.propTypes = {\n  component: elementType.isRequired,\n}\n\nconst selectLoggedIn = ({ currentUser: { loginState } }) =>\n  loginState === 'logged-in'\n\nexport default PrivateRoute\n","const ObjectId = require('bson-objectid')\n\n// Types d’actions\n// ---------------\n\nconst ADD_GOAL = 'goal-tracker/goals/GOALS_ADD'\nconst REMOVE_GOAL = 'goal-tracker/goals/GOALS_DEL'\nconst UPDATE_GOAL = 'goal-tracker/goals/GOALS_UPDATE'\n\n// Réducteur\n// ---------\n\nexport default function reduceGoals(state = [], action) {\n  switch (action.type) {\n    case ADD_GOAL: {\n      const { name, target, units } = action.payload\n      const id = ObjectId.generate()\n      return [...state, { id, name, target, units }]\n    }\n\n    case REMOVE_GOAL:\n      return state.filter(({ id }) => id !== action.payload.id)\n\n    case UPDATE_GOAL: {\n      return state.map((goal) =>\n        goal.id === action.payload.id ? action.payload : goal\n      )\n    }\n\n    default:\n      return state\n  }\n}\n\n// Action Creators\n// ---------------\n\nexport function addGoal(name, target, units) {\n  return { type: ADD_GOAL, payload: { name, target, units } }\n}\n\nexport function removeGoal(id) {\n  return { type: REMOVE_GOAL, payload: { id } }\n}\n\nexport function updateGoal(id, name, target, units) {\n  return { type: UPDATE_GOAL, payload: { id, name, target, units } }\n}\n","// Ajout/modification de paramètre\n// ===============================\n\n// C’est en fait une boîte de dialogue, inclue d’office dans le conteneur parent\n// (`SettingsScreen`), et qui va donc être initialement *rendered* sans objectif\n// (`goal`), puis verra ses propriétés mises à jour à chaque utilisation (`goal`\n// vide pour un ajout, `goal` rempli, dont son `id`, pour une modification).\n\nimport { useState } from 'react'\n\nimport Add from '@material-ui/icons/Add'\nimport Button from '@material-ui/core/Button'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Edit from '@material-ui/icons/Create'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport FormGroup from '@material-ui/core/FormGroup'\nimport TextField from '@material-ui/core/TextField'\n\nimport {\n  bool,\n  func,\n  GoalPropType,\n  oneOfType,\n  shape,\n} from '../shared/prop-types'\n\nconst DEFAULT_STATE = {\n  id: undefined,\n  name: '',\n  target: 5,\n  units: '',\n  keepOpen: true,\n}\n\n// Le composant\n// ------------\n\nconst AddSettingDialog = ({ goal, onAdd, onCancel, open }) => {\n  const [state, setState] = useState(DEFAULT_STATE)\n  const [prevGoalId, setPrevGoalId] = useState(undefined)\n\n  // On gère justement ici le cas où notre prop `goal` change au fil du temps,\n  // ce qui exige alors une resynchro de l’état, et partant un nouveau rendu.\n  // Si nous étions basés sur une classe, on utiliserait sans doute `static\n  // getDerivedStateFromProps()` pour ça.\n  if (prevGoalId !== goal.id) {\n    setState({ ...DEFAULT_STATE, ...goal, keepOpen: goal.id === undefined })\n    setPrevGoalId(goal.id)\n  }\n\n  // Si le `goal` passé a une propriété `id`, c’est un objectif existant, donc\n  // on le “modifie”, sinon c'est du vide et on “ajoute” un nouvel objectif.\n  const isEditing = 'id' in goal\n\n  return (\n    <Dialog aria-labelledby='addGoalTitle' onClose={onCancel} open={open}>\n      <DialogTitle id='addGoalTitle'>\n        {isEditing ? 'Modifier un objectif' : 'Ajouter un objectif'}\n      </DialogTitle>\n      <DialogContent>\n        <TextField\n          fullWidth\n          label='Nom'\n          margin='normal'\n          name='name'\n          onChange={(event) => handleChange(event, 'name')}\n          required\n          value={state.name}\n        />\n        <TextField\n          label='Quantité par jour'\n          margin='normal'\n          name='target'\n          onChange={(event) => handleChange(event, 'target')}\n          required\n          type='number'\n          value={state.target}\n        />{' '}\n        <TextField\n          label='Unité'\n          margin='normal'\n          name='units'\n          onChange={(event) => handleChange(event, 'units')}\n          placeholder='pas, minutes de course…'\n          required\n          value={state.units}\n        />\n        {isEditing ? (\n          ''\n        ) : (\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={state.keepOpen}\n                  onChange={(event, checked) =>\n                    handleChange(event, 'keepOpen', checked)\n                  }\n                />\n              }\n              label='Garder ouvert pour l’ajout suivant'\n            />\n          </FormGroup>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button color='secondary' onClick={onCancel} variant='text'>\n          Annuler\n        </Button>\n        {isEditing ? (\n          <Button color='primary' onClick={triggerAdd} variant='text'>\n            <Edit />\n            Modifier\n          </Button>\n        ) : (\n          <Button color='primary' onClick={triggerAdd} variant='text'>\n            <Add />\n            Ajouter\n          </Button>\n        )}\n      </DialogActions>\n    </Dialog>\n  )\n\n  // Gestionnaire générique de modification de champ, qui reflète la valeur de\n  // champ de formulaire (forcément `String`) dans le bon champ de `state`, avec\n  // une conversion de type à la volée si besoin.\n  //\n  // On a un cas particulier pour la case à cocher, qui appelle ce gestionnaire\n  // depuis un `onCheck` au lieu d’un `onChange`, et passer le troisième\n  // argument, d’où un traitement spécifique.\n  //\n  // Ce code est particulièrement intéressant, parce qu'on y voit…\n  //\n  // - Une sélection dynamique de fonction (`Number` ou `String`)\n  // - Une propriété dynamique/calculée (`[field]`)\n  // - Un spread d’objet (`...state`), la fonction renvoyée par le hook\n  //   `useState` n’étant pas différentielke, contrairement au `setState` de\n  //   `React.Component`.\n  function handleChange(event, field, checked) {\n    if (field === 'keepOpen') {\n      setState({ ...state, keepOpen: checked })\n    } else {\n      const caster = field === 'target' ? Number : String\n      setState({ ...state, [field]: caster(event.target.value) })\n    }\n  }\n\n  function triggerAdd() {\n    onAdd(state)\n    // On réinitialise toujours à l’état par défaut après un ajout, juste au cas\n    // où.\n    setState(DEFAULT_STATE)\n  }\n}\n// Comme pour tous les composants “bêtes”, la bonne pratique consiste à\n// expliciter les propriétés autorisées.\nAddSettingDialog.propTypes = {\n  goal: oneOfType([GoalPropType, shape({})]),\n  onAdd: func.isRequired,\n  onCancel: func.isRequired,\n  open: bool.isRequired,\n}\n\nexport default AddSettingDialog\n","// Suppression de paramètre\n// ========================\n\n// C’est en fait une boîte de dialogue, inclue d’office dans le conteneur parent\n// (`SettingsScreen`), et qui va donc être initialement *rendered* sans objectif\n// (`goal`), puis verra ses propriétés mises à jour à chaque utilisation.\n\nimport Button from '@material-ui/core/Button'\nimport Clear from '@material-ui/icons/Clear'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\n\nimport {\n  bool,\n  func,\n  GoalPropType,\n  oneOfType,\n  shape,\n} from '../shared/prop-types'\n\n// Il y a vraiment quelque chose de délicieux dans la déstructuration, surtout\n// pour un argument objet et en ajoutant des valeurs par défaut, comme ici…\nconst DeleteSettingDialog = ({ goal = {}, onCancel, onDelete, open }) => (\n  <Dialog aria-labelledby='deleteGoalTitle' onClose={onCancel} open={open}>\n    <DialogTitle id='deleteGoalTitle'>Supprimer un objectif</DialogTitle>\n    <DialogContent>\n      <DialogContentText>\n        Supprimer l’objectif {`« ${goal.name} » ?`}\n      </DialogContentText>\n    </DialogContent>\n    <DialogActions>\n      <Button color='secondary' onClick={onCancel}>\n        Ouh là, non !\n      </Button>\n      <Button color='primary' onClick={onDelete}>\n        <Clear />\n        Adios !\n      </Button>\n    </DialogActions>\n  </Dialog>\n)\n\n// Sur un composant “bête”, préciser les propriétés attendues / autorisées est\n// [une bonne pratique\n// incontournable](http://facebook.github.io/react/docs/reusable-components.html).\n// Quand on n’est pas dans une classe ES6 (et en effet, les composants purs\n// fonctionnels sont le cas majoritaire), on colle juste la propriété\n// `propTypes` directement sur la fonction (ça rend exactement pareil qu'une\n// propriété `static` dans une classe ES6).\nDeleteSettingDialog.propTypes = {\n  goal: oneOfType([GoalPropType, shape({})]),\n  onCancel: func.isRequired,\n  onDelete: func.isRequired,\n  open: bool.isRequired,\n}\n\nexport default DeleteSettingDialog\n","// Paramétrage d’un objectif\n// =========================\n\n// Section de l'écran de paramétrage, dédiée à un objectif.  Fournit notamment\n// le descriptif de l'objectif et le menu déroulant pour les actions de\n// modification et suppression.\n\nimport { useState } from 'react'\n\nimport Delete from '@material-ui/icons/Clear'\nimport Edit from '@material-ui/icons/Create'\nimport grey from '@material-ui/core/colors/grey'\nimport IconButton from '@material-ui/core/IconButton'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport MoreVert from '@material-ui/icons/MoreVert'\nimport { withStyles } from '@material-ui/core/styles'\n\nimport { func, GoalPropType, shape, string } from '../shared/prop-types'\n\nconst styles = {\n  moreIcons: { color: grey[400] },\n}\n\nconst GoalSetting = ({\n  classes,\n  goal,\n  goal: { name, target, units },\n  onDeleteClick,\n  onEditClick,\n}) => {\n  const [anchorEl, setAnchor] = useState(null)\n\n  const id = `rightIconMenu-${name.replace(/\\W+/, '-').toLowerCase()}`\n\n  return (\n    <ListItem>\n      <ListItemText primary={name} secondary={`${target} ${units}`} />\n      <ListItemSecondaryAction>\n        <IconButton\n          arial-label='Plus d’actions…'\n          aria-owns={anchorEl ? id : null}\n          aria-haspopup='true'\n          onClick={openMenu}\n        >\n          <MoreVert classes={{ root: classes.moreIcons }} />\n        </IconButton>\n        <Menu\n          anchorEl={anchorEl}\n          id={id}\n          open={Boolean(anchorEl)}\n          onClose={closeMenu}\n        >\n          <MenuItem onClick={requestEdit}>\n            <ListItemIcon>\n              <Edit />\n            </ListItemIcon>\n            Modifier\n          </MenuItem>\n          <MenuItem onClick={requestDelete}>\n            <ListItemIcon>\n              <Delete />\n            </ListItemIcon>\n            Supprimer\n          </MenuItem>\n        </Menu>\n      </ListItemSecondaryAction>\n    </ListItem>\n  )\n\n  function closeMenu() {\n    setAnchor(null)\n  }\n\n  function requestDelete() {\n    closeMenu()\n    onDeleteClick?.(goal)\n  }\n\n  function requestEdit() {\n    closeMenu()\n    onEditClick?.(goal)\n  }\n\n  function openMenu(event) {\n    setAnchor(event.currentTarget)\n  }\n}\nGoalSetting.propTypes = {\n  classes: shape({ moreIcons: string.isRequired }).isRequired,\n  goal: GoalPropType,\n  onDeleteClick: func.isRequired,\n  onEditClick: func.isRequired,\n}\n\nexport default withStyles(styles)(GoalSetting)\n","import { Link } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useEffect, useState } from 'react'\n\nimport Add from '@material-ui/icons/Add'\nimport ArrowBack from '@material-ui/icons/ArrowBack'\nimport Button from '@material-ui/core/Button'\nimport Card from '@material-ui/core/Card'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport Divider from '@material-ui/core/Divider'\nimport IconButton from '@material-ui/core/IconButton'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Logout from '@material-ui/icons/ExitToApp'\nimport Typography from '@material-ui/core/Typography'\n\nimport { addGoal, removeGoal, updateGoal } from '../reducers/goals'\nimport AddSettingDialog from './AddSettingDialog'\nimport DeleteSettingDialog from './DeleteSettingDialog'\nimport GoalSetting from './GoalSetting'\nimport { logOut } from '../reducers/currentUser'\n\nconst DEFAULT_STATE = { goal: {}, dialog: null }\n\nconst SettingsScreen = () => {\n  useEffect(() => {\n    document.title = 'Mes paramètres'\n  }, [])\n\n  const [{ goal, dialog }, setState] = useState(DEFAULT_STATE)\n\n  const { goals, email } = useSelector(selectState)\n  const dispatch = useDispatch()\n\n  return (\n    <>\n      <Button component={Link} to='/' variant='text'>\n        <ArrowBack />\n        Retour\n      </Button>\n      <Card className='settings'>\n        <CardHeader title='Paramètres' />\n        <CardContent>\n          <List>\n            <ListItem>\n              <ListItemText\n                primary='Vous êtes connecté-e en tant que'\n                secondary={email}\n              />\n              <ListItemSecondaryAction>\n                <IconButton onClick={() => dispatch(logOut())}>\n                  <Logout />\n                </IconButton>\n              </ListItemSecondaryAction>\n            </ListItem>\n          </List>\n          <Divider />\n          <List>\n            <Typography variant='subtitle1'>Mes objectifs</Typography>\n            {goals.map((goal) => (\n              <GoalSetting\n                goal={goal}\n                key={goal.id}\n                onDeleteClick={openGoalDeleter}\n                onEditClick={openGoalEditor}\n              />\n            ))}\n            {goals.length === 0 && (\n              <ListItem>\n                <ListItemText secondary='Aucun objectif pour le moment' />\n              </ListItem>\n            )}\n          </List>\n        </CardContent>\n        <CardActions>\n          <Button color='primary' onClick={openGoalAdder} variant='contained'>\n            <Add />\n            Ajouter un objectif\n          </Button>\n        </CardActions>\n      </Card>\n      <AddSettingDialog\n        goal={goal}\n        onAdd={addOrUpdateGoal}\n        onCancel={closeDialogs}\n        open={dialog === 'add-or-update'}\n      />\n      <DeleteSettingDialog\n        goal={goal}\n        onCancel={closeDialogs}\n        onDelete={deleteSelectedGoal}\n        open={dialog === 'delete'}\n      />\n    </>\n  )\n\n  function addOrUpdateGoal({ id, name, target, units, keepOpen }) {\n    if (id !== undefined) {\n      dispatch(updateGoal(id, name, target, units))\n      keepOpen = false\n    } else {\n      dispatch(addGoal(name, target, units))\n    }\n    if (!keepOpen) {\n      closeDialogs()\n    }\n  }\n\n  function closeDialogs() {\n    setState(DEFAULT_STATE)\n  }\n\n  function deleteSelectedGoal() {\n    dispatch(removeGoal(goal.id))\n    closeDialogs()\n  }\n\n  function openGoalAdder() {\n    setState({ goal: {}, dialog: 'add-or-update' })\n  }\n\n  function openGoalDeleter(goal) {\n    setState({ goal, dialog: 'delete' })\n  }\n\n  function openGoalEditor(goal) {\n    setState({ goal, dialog: 'add-or-update' })\n  }\n}\n\nconst selectState = ({ goals, currentUser: { email } }) => ({ goals, email })\n\nexport default SettingsScreen\n","import { isoDate } from '../lib/helpers'\n\n// Types d’actions\n// ---------------\n\nconst CLOSE_DAY = 'goal-tracker/closeDay/CLOSE_DAY'\n\n// Réducteur\n// ---------\n\nexport default function reduceCloseDay(state, action) {\n  switch (action.type) {\n    case CLOSE_DAY:\n      return {\n        ...state,\n        history: tallyPreviousDay(state),\n        today: isoDate(new Date()),\n        todaysProgress: {},\n      }\n\n    default:\n      return state\n  }\n}\n\n// Action Creators\n// ---------------\n\nexport function closeDay() {\n  return { type: CLOSE_DAY }\n}\n\n// Calcul de l’historisation\n// -------------------------\n\nfunction tallyPreviousDay({ goals, history, today, todaysProgress }) {\n  const progresses = {}\n  for (const { id, target } of goals) {\n    const progress = todaysProgress[id] || 0\n    if (progress > 0) {\n      progresses[id] = [progress, target]\n    }\n  }\n\n  const historyEntry = { date: today, progresses }\n  const hasProgresses = Object.keys(historyEntry.progresses).length > 0\n  return hasProgresses ? [historyEntry, ...history] : history\n}\n","import { combineReducers } from 'redux'\nimport reduceReducers from 'reduce-reducers'\n\nimport closeDay from './closeDay'\nimport currentUser from './currentUser'\nimport goals from './goals'\nimport history from './history'\nimport today from './today'\nimport todaysProgress from './todaysProgress'\n\nconst coreReducer = combineReducers({\n  currentUser,\n  goals,\n  history,\n  today,\n  todaysProgress,\n})\n\nconst goalTrackerReducer = reduceReducers(coreReducer, closeDay)\n\nexport default goalTrackerReducer\n","import { isoDate } from '../lib/helpers'\n\nexport default function today(state = isoDate(new Date()), action) {\n  return state\n}\n","import { compose, createStore } from 'redux'\nimport localForage from 'localforage'\nimport { offline } from '@redux-offline/redux-offline'\nimport offlineConfig from '@redux-offline/redux-offline/lib/defaults'\nimport { subDays } from 'date-fns'\n\nimport goalTrackerReducer from './reducers'\nimport { isoDate } from './lib/helpers'\n\nconst DEFAULT_STATE = {\n  currentUser: {\n    loginState: 'logged-in',\n    email: 'christophe@delicious-insights.com',\n  },\n  goals: [\n    {\n      id: '5bf57a79890a6e2c11ec9665',\n      name: 'Apprendre React',\n      target: 5,\n      units: 'aspects',\n    },\n    {\n      id: '5bf57a79890a6e2c11ec9666',\n      name: 'Apprendre Redux',\n      target: 2,\n      units: 'vidéos',\n    },\n    {\n      id: '5bf57a79890a6e2c11ec9667',\n      name: 'Apprendre Webpack',\n      target: 3,\n      units: 'pages de doc',\n    },\n  ],\n  today: isoDate(new Date()),\n  todaysProgress: {\n    '5bf57a79890a6e2c11ec9665': 1,\n    '5bf57a79890a6e2c11ec9666': 1,\n    '5bf57a79890a6e2c11ec9667': 1,\n  },\n  history: [\n    {\n      date: isoDate(subDays(new Date(), 1)),\n      progresses: {\n        '5bf57a79890a6e2c11ec9665': [2, 5],\n        '5bf57a79890a6e2c11ec9666': [1, 2],\n      },\n    },\n    {\n      date: isoDate(subDays(new Date(), 2)),\n      progresses: {\n        '5bf57a79890a6e2c11ec9665': [4, 5],\n        '5bf57a79890a6e2c11ec9666': [1, 2],\n        '5bf57a79890a6e2c11ec9667': [2, 3],\n      },\n    },\n    {\n      date: isoDate(subDays(new Date(), 3)),\n      progresses: {\n        '5bf57a79890a6e2c11ec9665': [3, 5],\n        '5bf57a79890a6e2c11ec9666': [2, 2],\n        '5bf57a79890a6e2c11ec9667': [1, 3],\n      },\n    },\n  ],\n}\n\nconst reduxOfflineConfig = {\n  ...offlineConfig,\n  persistOptions: {\n    storage: localForage,\n  },\n}\n\nconst devToolsEnhancer =\n  typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__\n    ? window.__REDUX_DEVTOOLS_EXTENSION__()\n    : (x) => x\n\nexport function makeStore(\n  initialState = DEFAULT_STATE,\n  { shouldPersist = process.env.NODE_ENV !== 'test' } = {}\n) {\n  const enhancer = shouldPersist\n    ? compose(offline(reduxOfflineConfig), devToolsEnhancer)\n    : devToolsEnhancer\n\n  const store = createStore(goalTrackerReducer, initialState, enhancer)\n\n  if (module.hot) {\n    module.hot.accept('./reducers', () => {\n      const nextGTR = require('./reducers').default\n      store.replaceReducer(nextGTR)\n    })\n  }\n\n  return store\n}\n\nconst store = makeStore()\n\nexport default store\n","import { Provider } from 'react-redux'\nimport { Route, BrowserRouter as Router } from 'react-router-dom'\n\nimport HistoryScreen from './history/HistoryScreen'\nimport HomeScreen from './main/HomeScreen'\nimport PrivateRoute from './shared/PrivateRoute'\nimport SettingsScreen from './settings/SettingsScreen'\nimport store from './store'\n\nconst App = () => (\n  <Provider store={store}>\n    <Router>\n      <>\n        <Route exact path='/' component={HomeScreen} />\n        <PrivateRoute exact path='/settings' component={SettingsScreen} />\n        <PrivateRoute exact path='/history' component={HistoryScreen} />\n      </>\n    </Router>\n  </Provider>\n)\n\nexport default App\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","export default __webpack_public_path__ + \"static/media/clock-reset.eeca1765.png\";","import { addSeconds, differenceInCalendarDays, parseISO } from 'date-fns'\n\nimport clockIcon from '../icons/clock-reset.png'\nimport { closeDay } from '../reducers/closeDay'\nimport store from '../store'\n\nconst STAMP_FORMATTER = new Intl.DateTimeFormat('fr-FR', {\n  hour: '2-digit',\n  minute: '2-digit',\n  second: '2-digit',\n})\n\nconst clock = setInterval(checkClock, 1000)\nlet permissionGranted = false\n\ncheckForPermissions()\ncheckForTodaysFirstUse()\n\nif (module.hot) {\n  module.hot.accept()\n  module.hot.dispose(() => {\n    clearInterval(clock)\n  })\n}\n\nconst HISTORY_TRIGGER_TIME =\n  process.env.NODE_ENV === 'production'\n    ? '00:00:00'\n    : STAMP_FORMATTER.format(addSeconds(new Date(), 5))\n\nfunction checkClock() {\n  const now = STAMP_FORMATTER.format(new Date())\n\n  if (now === HISTORY_TRIGGER_TIME) {\n    closePreviousDay()\n  }\n}\n\nfunction checkForPermissions() {\n  if (typeof window === 'undefined' || !window.Notification) {\n    return\n  }\n\n  permissionGranted = window.Notification.permission === 'granted'\n  if (!permissionGranted) {\n    window.Notification.requestPermission((status) => {\n      permissionGranted = status === 'granted'\n    })\n  }\n}\n\nfunction checkForTodaysFirstUse() {\n  const storesLastDay = store.getState().today\n  if (\n    storesLastDay &&\n    differenceInCalendarDays(parseISO(storesLastDay), new Date()) < 0\n  ) {\n    closePreviousDay()\n  }\n}\n\nfunction closePreviousDay() {\n  store.dispatch(closeDay())\n\n  notify({\n    title: 'Fin de journée !',\n    text: 'Vos objectifs ont été historisés et repartent à zéro.',\n    icon: clockIcon,\n    secondsVisible: 4,\n  })\n}\n\nfunction notify({ title, text, icon, secondsVisible = 0 }) {\n  if (!permissionGranted) {\n    return\n  }\n\n  const notif = new window.Notification(title, {\n    body: text,\n    icon,\n    lang: 'fr',\n    requireInteraction: secondsVisible > 0,\n    tag: 'goal-tracker',\n    vibrate: [100, 50, 100, 50, 100],\n  })\n\n  if (secondsVisible > 0 && typeof notif.close === 'function') {\n    notif.addEventListener('show', () => {\n      setTimeout(() => notif.close(), secondsVisible * 1000)\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration'\n\nimport './lib/clock'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register()\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}